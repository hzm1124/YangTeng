<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>爬虫 - 12.AutoteileDirekt_2</title>
</head>

<body>
    <div style="text-align: center;">
        <h1>AutoteileDirekt_2</h1>
        <p>1. 确认目录内容替换完毕</p>
        <p>2. 设置 -> 下载内容 -> 位置：.../venv/code/02.crawler/12.AutoteileDirekt/pic</p>
        <p>3. 设置 -> 隐私和安全 -> 清除浏览数据：缓存的图片和文件</p>
        <p>4. <b>url</b>结尾添加<b>?index=0</b></p>
    </div>

    <script>
        window.onload = function() {
            console.log('\n\n\n= = = = = = = = = = = = = = =');
            console.log('Tomcat启动');

            let data = '[{"Src":"https://cdn.autoteiledirekt.de/thumb?id=7023595&m=1&n=0&lng=de&rev=94077844"},{"Src":"https://cdn.autoteiledirekt.de/thumb?id=7275624&m=1&n=0&lng=de&rev=94077844"},{"Src":"https://cdn.autoteiledirekt.de/thumb?id=7275626&m=1&n=0&lng=de&rev=94077844"},{"Src":"https://cdn.autoteiledirekt.de/thumb?id=7850717&m=1&n=0&lng=de&rev=94077844"},{"Src":"https://cdn.autoteiledirekt.de/thumb?id=7933901&m=1&n=0&lng=de&rev=94077844"}]'
            let json_data = JSON.parse(data);
            console.log('长度：' + json_data.length);

            let list_param = window.location.href.split('?')[1].split('&');
            let param_index;
            for(let i=0; i<list_param.length; i++) {
                if(list_param[i].startsWith('index=')) {
                    param_index = list_param[i].split('index=')[1];
                }
            }
            console.log('index：' + param_index);
            console.log(json_data[Number(param_index)]['Src'] + '&index=' + param_index);
            console.log('= = = = = = = = = = = = = = =\n\n\n');
            window.location.href = json_data[Number(param_index)]['Src'] + '&index=' + param_index;
        }
    </script>
</body>
</html>